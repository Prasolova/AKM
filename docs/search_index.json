[
["index.html", "Картография: практикум в QGIS Программное обеспечение для работы QGIS Inkscape", " Картография: практикум в QGIS Карпачевский А.М. 2020-12-07 Программное обеспечение для работы QGIS Для выполнения работ в курсе «картография» вам потребуется скачать и установить на свой компьютер геоинформационное приложение QGIS. Это свободно распространяемое программное обеспечение, то есть для его установки не требуется покупка или регистрация. Windows Скачайте с официального сайта последнюю стабильную версию QGIS (3.10). Выберите версию в зависимости от разрядности вашей системы: 64 bit, 32 bit. Когда исполняемый файл загрузится, запустите его. Если потребуется, разрешите приложению вносить изменения на вашем устройстве. Будет показано приветственное окно мастера установки. Нажмите «Далее», чтобы перейти на следующий шаг На следующем шаге будет показано лицензионное соглашение QGIS и другого программного обеспечения, входящего в пакет поставки. Нажмите «Принимаю». На следующем шаге выберите папку для установки. По возможности используйте расположение, предлагаемое по умолчанию. На следующем шаге предлагается выбрать дополнительные компоненты для установки. Снимите все флажки, кроме QGIS, и нажмите «Установить» После окончания установки ярлыки QGIS будут добавлены в меню “Пуск” и в отдельную папку QGIS на рабочем столе. macOS По состоянию на 2020-12-07 для прохождения практикума рекомендуется использовать альтернативную сборку версии 3.4.12. Перейдя по ссылке, необходимо согласиться сохранить образ установочного диска на компьютер (можно разрешить его сразу открыть средствами DiskImageMounter): После того как образ загрузится и будет открыт, необходимо последовательно запустить три установщика, выделенные на снимке экрана ниже (именно в том порядке, в котором они пронумерованы!): Установщики GDAL Complete и QGIS 3 LTR необходимо запускать через контекстное меню и выбирать пункт “Открыть”: В появившемся диалоговом окне необходимо нажать “Открыть”, чтобы разрешить установку: Все опции при установке каждой компоненты приложения оставляйте по умолчанию, ничего не меняйте и нажимайте в диалоговых окнах “Продолжить”, пока не запустится установщик. После того как последняя компонента — QGIS — будет установлена, вы сможете найти приложение и запустить его из каталога Программы macOS: Linux Воспользуйтесь инструкциями по этой ссылке. Дополнительную информацию по установке можно найти на https://qgis.org/ru/site/forusers/download.html. Inkscape Для некоторых операций оформления карты невозможно обойтись только геоинформационным ПО. Открытый графический пакет Inkscape доступен для скачивания на официальном сайте. Выберите дистрибутив для вашей операционной системы. Если вы устанавливаете Inkscape на Windows, выберите разрядность вашей системы Для скачивания необходимо выбрать Windows Installer Package (формат файла MSI). Установку лучше всего запускать от имени администратора. "],
["map-topo.html", "Справка 1 Создание топографического плана 1.1 Чтение CSV-таблиц 1.2 Создание базы данных для топографического плана 1.3 Векторизация 1.4 Оформление в условных знаках 1.5 Оформление макета", " Справка 1 Создание топографического плана 1.1 Чтение CSV-таблиц В начало справки ⇡ QGIS может читать данные в разном формате: векторном, растровом, табличном и других. Подготовьте таблицу формата CSV, где будут содержаться данные по каждому пикету тахеометрии. Все инструменты для чтения различных форматов данных стандартно расположены на панели слева. Для чтения CSV-таблицы используйте иконку в виде запятой. Панель менеджера источника данных Примечание: Если у вас такой панели не оказалось, это значит, что она отключена. Для включения панели щелкните правой кнопкой мыши по пустому месту на панели и найдите панель работы со слоями. В открывшемся окне Менеджер источников данных | Delimited Text укажите путь к CSV-файлу. В разделе Формат файла выберите или пропишите разделитель колонок в файле. Если разделитель указан верно, внизу в окошке предпросмотра (Примеры данных) вы увидите данные ячеек, разнесенные по соответствующим колонкам. При необходимости, если в текстовых полях вы видите непонятные символы, поменяйте кодировку (обычно это либо UTF-8, либо windows-1251). В разделе Geometry Definition мы указываем поле с геометрией объекта. Если файл CSV содержит координаты X и Y точек, то необходимо выбрать их соответствующее название из выпадающего списка напротив X field и Y field. Обращаем ваше внимание на то, что в QGIS, как и во всех ГИС-пакетах, реализована правая декартова система координат, то есть x (easting) – направлен на восток, y (northing) направлен на север. Ваши исходные данные могут быть с по-иному заданными осями. В окошке Система координат геометрии необходимо указать правильную систему координат, в которую изначально подразумеваются ваши исходные данные. Если неправильно задать систему координат, объекты окажутся не в том месте, где хотелось бы их видеть. После того, как были заданы все необходимые параметры, должна активироваться кнопка Добавить внизу окна. Если она не активирована, вероятно, есть ошибка при чтении данных, например, в исходной таблице неправильно указан десятичный разделитель (точка или запятая в зависимости от настроек операционной системы). В окне карты должны появиться точечные объекты. Для удобства работы с сними можно добавить подписи этих точек. Для этого нужно зайти в свойства слоя (дважды щёлкнуть по слою), найти пункт Подписи и выбрать Single labels. В окне Value выбирается имя поля атрибутивной таблицы, по которому мы хотим получить подписи. Если вы хотите сделать сложную подпись на основе нескольких строк, нажмите на кнопку , откроется конструктор выражений. В среднем окне можно найти пункт Поля и значения. Двойной щелчок по имени поля добавляет его в выражение. Соединение значений полей осуществляется посредством конкатенации строк. Для этого используется символ . Например, если мы хотим вывести подпись по коду точки и по ее описанию, это может выглядеть так: “Code” || “ ” “Description” Сохраните проект. 1.2 Создание базы данных для топографического плана В начало справки ⇡ QGIS поддерживает различные форматы пространственных данных. Среди них наиболее удобным для хранения и работы считается формат Geopackage. По сути это формат базы пространственных данных, внутри которой мы можем складывать различные классы объектов. Для создания базы данных формата Geopackage откройте окно Браузера внутри QGIS. Если его нет, включите его в выпадающем списке при щелчке правой кнопкой мыши по пустой панели. Найдите каталог, в котором вы хотите создать базу данных (лучше всего, чтобы путь к этой базы состоял из символов латинского алфавита, не содержал дефисов, пробелов и спецсимволов). Правой кнопкой мыши щелкните по каталогу, выберете Новые – Geopackage. Откроется окно, которое помимо самой базы данных предложит создать слой внутри неё. В поле Имя таблицы введите имя класса объектов латинскими символами, лучше, чтобы это был английский перевод соответствующего вида картографируемого объекта, а не транслитерация. Окно создания базы данных Geopackage В поле Тип геометрии укажите соответствующую геометрию объектов (тип локализации на плане). Обратите внимание, что каждый класс объектов поддерживает только один тип геометрии. Укажите спроецированную систему координат. Если указать геодезическую систему координат, то велика вероятность, что при векторизации объектов возникнут курьёзные ситуации. В разделе New Field можно указать имя, типа и длину атрибутивного поля создаваемого класса объектов, но, скорее всего, вам это не пригодится. Поскольку мы создаем план не небольшую территорию, позволительно будет создать для каждого вида объекта отдельный класс внутри базы. Каждый последующий класс объектов создавайте внутри базы данных. Таким образом вы сформируете единое хранилище для всех картографируемых объектов. Сохраните проект. 1.3 Векторизация В начало справки ⇡ Созданные классы объектов в базе данных можно добавить в перечень слоев проекта простым перетаскиванием. Для редактирования объектов и добавления новых объектов в класс необходимо войти в режим редактирования. Для этого можно щелкнуть правой кнопкой мыши по слою и выбрать пункт «Режим редактирования», либо выделить слой и найти на панели инструментов кнопку . Активация режима редактирования откроет некоторые другие кнопки на панелях. Например, для полигонального объекта появится кнопка , с помощью которой можно создать новый полигон в слое. Для других типов геометрии иконка будет немного отличаться. Рисовка контура осуществляется с помощью левой кнопки мыши. Для завершения объекта нажмите правую кнопку мыши. Для редактирования отдельных вершин нажмите на кнопку . После этого у объекта кружочками выделятся вершины. Полигон в режиме отображения вершин Курсор в таком режиме может вести себя тремя разными способами: При выделении вершины вы можете изменить её положение При выделении ребра вы можете сдвинуть его вместе со смежными вершинами При нажатии на плюсик в центре ребра добавляется новая вершина Нажатие на клавишу delete позволяет удалить вершину. При векторизации объектов часто возникает необходимость пристыковать вершины одного объекта к вершинам другого объекта. Для корректной и комфортной пристыковки нужно включить панель Инструменты прилипания (snapping). Кнопка в виде магнита активирует прилипание. Остальные кнопки на данной панели позволяют уточнить параметры прилипания, в том числе расстояние, на котором оно начинает действовать. Дополнительные инструменты оцифровки Соответствующую панель вы так же, как и предыдущую, можете найти в выпадающем списке панелей. Дополнительная панель векторизации На данной панели доступны инструменты для векторизации параллельных и перпендикулярных линий, для перемещения объектов, создания внутренних колец (по сути – дырки в полигоне), разрезания объектов, склеивания объектов и другие. Выбрать объекты, например, для склеивания можно с помощью инструмента выделения . Не забывайте регулярно сохранять изменения в геометрии слоев с помощью кнопки на панели . Также не забывайте изменять изменения в самом проекте (они касаются набора слоев, их оформления, некоторых параметров) с помощью кнопки . Сохраните проект. 1.4 Оформление в условных знаках В начало справки ⇡ Для работы с оформлением топографического плана скачайте символы и топографические шрифты, а также условные обозначения. Для оформления наших слоёв проекта в условных знаков необходимо дважды щёлкнуть по слою. Откроются его свойства, среди которых в данный момент нас интересует Стиль. Для точечного слоя по умолчанию будет выставлен Простой маркер. Простой маркер в символике слоя С ним особо ничего не сделаешь – можно поменять геометрическую фигуру, изменить размер или цвет. Для использования более разнообразной библиотеки символов нужно в типе слоя выбрать SVG-маркер. Выбор SVG-символа Переместите папку со скаченными символами в директорию, где находятся остальные SVG-символы. Например, на Windows 10 это, вероятно, будет следующий путь: C:\\Users\\%USERNAME%\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\custom\\svg При выборе символа внизу появляется адрес к данному символу у вас на компьютере. Размер символа и его цвет вы можете настраивать в этом же окне. Для площадных объектов всё работает похоже, но немного сложнее. По умолчанию для таких слоёв даётся заливка цветом, которую можно менять. Дополнительно можно менять обводку. Для того чтобы заполнить наши площадные объекты штриховкой из специальных символов, например, газона, нужно выбрать Тип слоя – Заливка маркерами. Заливка маркерами После этого иерархия структуры значка в верхнем окошке вырастет – там добавится простой маркер. Как заменить простой маркер на SVG-символ вы уже знаете. Для настройки шага (частоты) маркеров необходимо выделить Заливка маркерами в иерархии структуры стиля. Настройки заливки маркерами Обратите внимание, что здесь можно настроить смещение символов, чтобы маркеры располагались, например, в шахматном порядке. Шахматный порядок маркеров Детальные настройки символов сверяйте с Условными обозначениями, проверяйте, как они выглядят в режиме макета. Сохраните проект. 1.5 Оформление макета В начало справки ⇡ Итоговое оформление карты/плана в ГИС-пакете QGIS осуществляется в режиме макета. Для этого надо найти пункт меню Проект – Создать макет. После ввода имени макета откроется отдельное окно, в котором нам предстоит скомпоновать наше картографическое изображение. Создание макета На пустом листе необходимо разместить саму карту, текстовые элементы, масштабную линейку с помощью специальных кнопок слева. Управление элементами карты После добавления элементов карты их перечень появляется в окошке справа вверху. Свойства элемента карты Если выделить элемент, ниже открываются его свойства. Выделите элемент карты, запишите в его свойства масштаб 1:500. Систему координат выставить – WGS 1984 UTM 37N. В разделе Сетки нажмите на плюсик, чтобы добавить сетку. Выделив сетку и нажав на кнопку Modify Grid, мы можем редактировать её отображение. Настройка сетки координат В свойствах сетки выберите вид сетки – перекрестие, шаг сетки – 25 метров, цвет линии – зеленый. В разделе Рамки выберите exterior ticks для показа выходов сетки наружу рамки. Длину выходов установить 7 мм. В разделе Draw Coordinates сориентируйте боковые подписи выходов сетки вертикально вдоль рамки. Настройка отображения подписей координат В свойствах карты включите опцию Рамка. Настройте её ширину в соответствии с требованиями. Настройка рамки Расположите масштаб и стандартную информацию о листе топографического плана в текстовых элементах сверху и снизу рамки. Настройте размер и расстояние между условными знаками в соответствии с требованиям. Изменить размер листа можно щелчком правой кнопкой по листу. После этого справа откроются свойства элемента, где можно указать размеры листа. Изменение размеров листа Для экспорта растрового изображения выберите Макет – Экспорт в … Пример топографического плана. Съёмка – бригада в составе А. Веприцкого, Е. Макаровой, А. Мизиновой, Е. Епифановой, М. Рамих. Картограф-составитель – А. Мизинова, 2020. Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "],
["map-math.html", "Справка 2 Математическая основа карт 2.1 Полезные ссылки 2.2 Исходные данные 2.3 Интерфейс QGIS 2.4 Системы координат 2.5 Искажения картографических проекций 2.6 Построение эллипсов искажения в QGIS 2.7 Работа с компоновкой в QGIS 2.8 Варианты решения некоторых технических проблем", " Справка 2 Математическая основа карт 2.1 Полезные ссылки Interactive Album of Map Projections 2.0 Map Projection Transitions Myriahedral projections Projection Wizard G.Projector — Map Projection Explorer 2.2 Исходные данные База данных в формате Geopackage Бланк задания 2.3 Интерфейс QGIS В начало справки ⇡ При вызове QGIS Desktop и создании нового проекта окно программы будет состоять из основных панелей и окон: 1) самое большое окно в середине – окно карты, где происходит визуализация пространственных данных; 2) слева панель со слоями – перечнем основных используемых слоёв данных; 3) панель Браузера – встроенного проводника по файловой системе компьютера. Панелей и окон может быть больше. Их полный перечень становится доступен при щелчке правой кнопкой мыши по пустому месту сверху на панели. Включенная галочка в списке означает, что панель или окно активны. Основные панели и окна QGIS Desktop Как правило, по умолчанию открыта панель работы со слоями (на рисунке слева). Именно с помощью этой панели возможно добавление данных в проект. Обратите внимание, что для добавления векторных, растровых, табличных и прочих данных предусмотрены разные иконки. Добавлять данные в проект также можно двойным щелчком по объекту в браузере. С помощью колёсика мыши можно изменять масштаб изображения, а с помощью зажатого колёсика можно передвигаться по карте. Внизу окна карты есть окошко с текущим масштабом изображения, рядом с ним окошко с координатами курсора. По умолчанию координаты даются в системе координат проекта карты, но единиц измерения можно поменять в свойствах проекта. Проект QGIS – это файл, в котором хранятся ссылки на пространственные данные (но не сами пространственные данные!), а также настройки их символики, подписей, система координат карты, история геообработки и некоторые другие вещи. Файл проекта имеет формат QGZ и позволяет открыть проект в том виде (с теми слоями и их свойствами), в котором его последний раз сохраняли. Сохраните проект после добавления необходимых слоёв или изменения настроек их отображения Проект – Сохранить, либо нажмите на соответствующую иконку. Открыть свойства самого проекта можно выбрав Проект – Свойства… Окно свойств проекта В свойствах проекта можно менять, например, систему координат. Обратите внимание, от изменения системы координат проекта система координат слоёв в этом проекте не поменяется. Программное обеспечение умеет на лету перепроецировать слои в разных системах координат, поэтому мы их в проекте можем видеть вместе (если, конечно, данные в них на одну территорию). Для навигации по окну карты используйте панель инструментов перемещения по карте . Среди них есть инструменты изменения масштаба, перемещения, показа карты в экстенте (полный охват). 2.4 Системы координат В начало справки ⇡ В программном обеспечении ГИС традиционно принято выделять две большие категории систем координат (СК): 1) географические СК, 2) спроецированные СК Географические системы координат основаны на датумах. Датум – это параметры размещения эллипсоида внутри тела земли. Для одного эллипсоида может быть много датумов. Единицы измерения в ГСК – широта и долгота в градусах. Спроецированные системы координат основаны на проекциях. Проекция – это математически обусловленное правило перехода от поверхности эллипсоида к плоскости карты. Единицы измерения в спроецированных СК – метры, километры, мили, футы и прочие единицы длины. Проекций великое множество, они подразделяются по характеру искажений и по применяемым для построения вспомогательным геометрическим фигурам. Подробнее об этом можно узнать из учебников [Картография, 2002; Серапинас, 2005] В ГИС ПО системы координат могут быть представлены тремя основными форматами: EPSG или ESRI код EPSG коды – коды проекций, которые присваиваются Международной ассоциацией производителей нефти и газа. Все коды с возможностью подбора проекции для территории собраны в реестре. Более удобный инструмент для поиска собран в ресурсе. Например, у наиболее часто встречающейся ГСК WGS 1984 – EPSG:4326, у проекции WGS 1984 UTM 37N – EPSG:32637. Обратите внимание, что далеко не все существующие проекции и системы координат имеют код EPSG. ESRI коды – коды проекций, которые присвиваются Институтом исследования систем окружающей среды (Environmental Systems Research Institute) – производителя программного обеспечения семейства ArcGIS. WKT WKT – Well-Known text – один из форматов записи параметров системы координат в текстовом человекочитаемом виде. Ознакомиться со стандартом можно по ссылке, раздел 7.5. Например, запись для цилиндрической проекции Миллера на эллипсоиде WGS 1984 будет выглядеть следующим образом: World_Miller_Cylindrical WKT PROJCRS[&quot;World_Miller_Cylindrical&quot;, BASEGEOGCRS[&quot;WGS 84&quot;, DATUM[&quot;World Geodetic System 1984&quot;, ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563, LENGTHUNIT[&quot;metre&quot;,1]]], PRIMEM[&quot;Greenwich&quot;,0, ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433]]], CONVERSION[&quot;World_Miller_Cylindrical&quot;, METHOD[&quot;Miller Cylindrical&quot;], PARAMETER[&quot;Longitude of natural origin&quot;,0, ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433], ID[&quot;EPSG&quot;,8802]], PARAMETER[&quot;False easting&quot;,0, LENGTHUNIT[&quot;metre&quot;,1], ID[&quot;EPSG&quot;,8806]], PARAMETER[&quot;False northing&quot;,0, LENGTHUNIT[&quot;metre&quot;,1], ID[&quot;EPSG&quot;,8807]]], CS[Cartesian,2], AXIS[&quot;(E)&quot;,east, ORDER[1], LENGTHUNIT[&quot;metre&quot;,1]], AXIS[&quot;(N)&quot;,north, ORDER[2], LENGTHUNIT[&quot;metre&quot;,1]], USAGE[ SCOPE[&quot;unknown&quot;], AREA[&quot;World&quot;], BBOX[-90,-180,90,180]], ID[&quot;ESRI&quot;,54003]] В разделе BASEOGCRS вы можете увидеть датум, эллипсоид с параметрами, единицу длины, начальный меридиан и угловые единицы. В разделе CONVERSION указываются параметры False easting и False northing, которые обозначают сдвиг начала координат по соответствующим осям. В разделе CS указывается, что используется декартова система координат (Cartesian) с двумя осями, далее для осей указаны их направления, порядок перечисления и единицы измерения. В разделе USAGE указывается, на какую территорию применима данная проекция. В разделе ID указан идентификатор этой проекции в ESRI. Кроме этого, для многих проекций в параметрах могут указываться широта (Latitude of natural origin) и долгота (Longitude of natural origin) начала координат, если они отличаются от экватора и гринвича. Параметры сдвига начала счёта прямоугольных координат задаются относительно этой точки. Для нормальных конических секущих проекций указываются две стандартные параллели (Latitude of 1(2)st standard parallel). PROJ (PROJ4) PROJ – формат записи системы координат, разработанный для библиотеки Proj, предназначенной для преобразования проекций. Запись для уже знакомой нам проекции Миллера будет выглядеть следующим образом: +proj=mill +R_A +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs Из строки видно, что в ней содержится информация о начальном меридиане, сдвиге начала прямоугольной системы координат, датуме, а также единицах измерения. Ресурс Projectionwizard позволяет подобрать проекцию под конкретную территорию. Возле названия рекомендуемой проекции вы можете увидеть ссылки на proj и wkt строки, которые можно скопировать. Копирование Proj-строки из Projection Wizard Чтобы добавить пользовательские системы координат в QGIS, необходимо вызвать пункт главного меню Установки – Пользовательские проекции… В открывшемся окне нажмите на плюсик для добавления новой СК. Заполните название проекции, укажите тип представления информации и вставьте строку с параметрами в окно. Название проекции следует давать латинскими буквами без пробелов. Создание пользовательской СК 2.5 Искажения картографических проекций В начало справки ⇡ Искажения могут быть наглядно представлены в виде индикатрис Тиссо. Индикатриса представляет собой эллипс, в котором большой a и малый b диаметры показывают направления наибольшего искажения частных масштабов длин. На земном эллипсоиде эти эллипсы все выглядят одинаково и представляют собой окружности, но при переводе в спроецированную систему координат искажаются в разной степени в зависимости от особенностей проекции и положении на карте. Радиусы в эллипсе вдоль меридиана m и параллели n характеризуют искажения частных масштабов длин вдоль меридианов и параллелей. По форме эллипсов можно понять, какого рода искажения характерны для данной проекции в конкретном месте карты: углов, площадей, форм. Индикатрисы Тиссо в проекции Бонна Частный масштаб площадей p может быть рассчитан следующим образом: \\[p= mn\\sin(\\theta)\\] Здесь \\(\\theta\\) – угол между параллелью и меридианом в центре эллипса. \\[a + b= \\sqrt{m^2 + n^2 + 2p}\\] \\[a - b= \\sqrt{m^2 + n^2 - 2p}\\] Искажения углов \\(\\omega\\) можно найти по формуле \\[\\sin(\\frac{\\omega}{2}) = \\frac{(a-b)}{(a+b)}\\] 2.6 Построение эллипсов искажения в QGIS В начало справки ⇡ Для построения эллипсов искажений в QGIS необходимо установить дополнительный плагин. Его можно скачать по ссылке. В окне программы в главном меню наверху выберите пункт Модули – Управление и установка модулей…. Окно установки модулей Выберите пункт Install from ZIP и укажите путь к скаченному архиву. Нажмите на Install Plugin. После установки модуль появится в выпадающем списке панелей инструментов под названием tiss. Сама панель состоит из одной кнопки . После нажатия на неё откроется окошко для построения эллипсов. Окно для построения эллипсов искажений В разделе Extent мы указываем охват, в пределах которого строятся эллипсы. В разделе Resolution указывается шаг частоты индикатрис по широте и долготе в градусах. В разделе Radius of the caps указывается радиус эллипса либо в градусах, либо в километрах. Параметры a и b – это полуоси эллипсоида. Cap segments и Line segments – количество сегментов у эллипса и линий сетки. Кнопка Run запускает построение эллипсов искажений и сетки меридианов и параллелей. Если у вас возникли проблемы с построением эллипсов и сетки – их положение не совпадает с границами объектов из базы данных, обратитесь к технической справке ⇣ Для оценки параметров искажений в конкретных узлах градусной сетки на примере эллипсов искажений можно использовать соответствующие инструменты. Измерения в QGIS осуществляются с помощью инструмента линейки . Он находится на панели атрибутов . Там же можно выбрать инструмент для измерения углов . При измерении длин появляется окно, где показаны настройки измерений. Окно измерений Для измерения в проекции необходимо выбрать пункт Прямоугольный. Построение ломаной линии осуществляется нажатием левой кнопки мыши. Закончить сегмент можно правой кнопкой мыши. Для удобства измерений можно включить инструмент прилипания, расположенные на одноименной панели. Прилипание (snapping) – это притягивание узлов рисуемой пользователем линии к уже существующим объектам. Для включения прилипания нажмите на кнопку магнита . На этой же панели можно настроить прилипание, например, к местам пересечения объектов . 2.7 Работа с компоновкой в QGIS В начало справки ⇡ Итоговое оформление карты в ГИС-пакете QGIS осуществляется в режиме макета. Для этого надо найти пункт меню Проект – Создать макет. После ввода имени макета откроется отдельное окно, в котором нам предстоит скомпоновать наше картографическое изображение. Вид макета карты На пустом листе с помощью специальных кнопок слева можно разместить одно или несколько картографических изображений , текстовые элементы , масштабную линейку , легенду . Для перемещения изображения карты внутри рамки используйте кнопку После добавления элементов карты их перечень появляется в окошке справа вверху. Если выделить элемент, ниже открываются его свойства. Для карты можно указать главный масштаб и систему координат. Свойства элемента карты В разделе Сетки нажмите на плюсик, чтобы добавить сетку. Выделив сетку и нажав на кнопку Modify Grid, мы можем редактировать её отображение. Добавление сетки Обратите внимание, что содержание картографического изображения в компоновке полностью синхронизируется с содержанием проекта. Если вы хотите установить линии сетки с подписями, то необходимо отключить слой с сеткой в основном окне программы во избежание избыточного дублирования. По умолчанию для картографического изображения строится сетка в заданной СК. Если вы хотите построить градусную сетку, то для неё необходимо указать соответствующую геодезическую систему координат в настройках внешнего вида. Настройка сетки координат В разделе Draw Coordinates можно настроить ориентировку подписей выходов сетки, точность и другие параметры. Для выхода из свойств сетки нажмите на стрелку назад В свойствах карты включите опцию Рамка. Настройте её ширину. Итоговый вариант компоновки может выглядеть следующим образом: Для экспорта растрового изображения выберите Макет – Экспорт в … 2.8 Варианты решения некоторых технических проблем В начало справки ⇡ 2.8.1 Некорректное построение эллипсов искажений и координатной сетки Если положение объектов карты и эллипсов искажений не совпадает, вероятно, что у вас возник конфликт системного разделителя. Используемый модуль работает с десятичным разделителем в виде точки. Если у вас в системе настроен десятичный разделитель в виде запятой, его необходимо поменять на точку. В ОС Windows 10 это делается следующим образом: Вызовите пункт Параметры в меню Пуск. Выберите пункт Время и язык. Выберите пункт Формат даты, времени, региона. Выберите пункт Дополнительные параметры даты и времени, региональные параметры. Выберите пункт Изменение форматов даты, времени и чисел. В открывшемся окне вызовите Дополнительные параметры…. Укажите в качестве разделителя целой и дробной части точку. 2.8.2 Некорректное отображение геометрии Иногда при изменении проекции карты возникают проблемы с отображением векторных объектов, как на рисунке ниже. Это обусловлено ошибками геометрии при переходе через долготу 180°. К сожалению, на данный момент в QGIS нет решения данной проблемы. Картинка может стать менее загромождённой лишь при изменении масштаба (увеличении). Если это не помогает, остаётся только убрать заливку у полигональных объектов, что немного облегчит восприятие. Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "],
["map-symbology.html", "Справка 3 Способы изображения и графические средства 3.1 Исходные данные 3.2 Графические переменные 3.3 Способы изображения", " Справка 3 Способы изображения и графические средства 3.1 Исходные данные Варианты заданий Бланк задания 3.2 Графические переменные В начало справки ⇡ Классические графические переменные были предложены Ж. Бертеном. С помощью них осуществляется семантическая дифференциация содержания карты. Графические переменные Терминология ГИС ПО Цвет Hue Оттенок Saturation, value Форма Marker symbol Размер Size Ориентировка Rotation Структура Marker fill, line fill При работе с геоинформационным программным обеспечением вам следует иметь в виду, что на данный момент в картографии доступно уже больше графических переменных – например, прозрачность, анимация и другие. Графические средства – это конкретная реализация графических переменных на карте. 3.3 Способы изображения В начало справки ⇡ Подробнее о способах изображения вы можете узнать из учебника А.М. Берлянта [Берлянт, 2002], еще подробнее – из учебника К.А. Салищева [Салищев, 1982]. Способы изображения Локализация Тип геометрии в БПД Значки точечная точка, мультиточка Линейные знаки линейная линия, мультилиния Знаки движения линейная линия, мультилиния Качественный фон площадная сплошная полигон, мультиполигон Количественный фон площадная сплошная полигон, мультиполигон Изолинии площадная сплошная растр, линия, полигон Картограммы площадная сплошная полигон, мультиполигон Картодиаграммы площадная сплошная полигон, мультиполигон Точечный способ площадная рассеянная полигон, мультиполигон Ареалы площадная рассеянная полигон, мультиполигон Локализованные диаграммы условно точечная точка При работе с геоинформационным программным обеспечение вам следует иметь в виду, что далеко не все способы изображения доступны для автоматизированного построения. В некоторых случаях требуется конвертация карты в графический формат и её редактирование в графических пакетах. Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "],
["map-create.html", "Справка 4 Составление географической карты 4.1 Исходные данные 4.2 Создание базы пространственных данных 4.3 Векторизация 4.4 Работа с атрибутами 4.5 Настройка символики 4.6 Настройка подписей 4.7 Имитация некоторых сложных графических средств и способов изображения 4.8 Работа с легендой в компоновке 4.9 Редактирование карты в графическом пакете", " Справка 4 Составление географической карты 4.1 Исходные данные Бланк задания 4.2 Создание базы пространственных данных В начало справки ⇡ Составление карты подразумевает, прежде всего, создание векторных наборов данных. Векторные данные – данные, которые описываются набором координат. Подробнее о них вы узнаете из курса Основы геоинформатики. На данный момент нам необходимо знать, что векторные объекты могут относиться к трём основным типам геометрии: 1) точечные; 2) линейные; 3) полигональные. Классы объектов – это наборы однородных векторных данных одного типа геометрии с одним набором атрибутов, относящие к одному роду пространственных объектов или явлений. Например, на почвенной карте будет визуализироваться класс полигональных объектов почв, класс полигональных объектов механического состава, класс внемасштабных почвенных ареалов. Атрибут класса объектов – это формализованное описание какого-либо свойства класса объектов. Атрибутов может быть много, каждый из них отвечает за различные аспекты пространственных объектов или явлений. У класса почв это может быть атрибут типа, подтипа, pH, содержания гумуса, мощности и т.д. Атрибуты строго типизируются, то есть при создании указывается тип данных, который будет храниться в атрибутивном поле: целочисленные данные, действительные числа, числа с плавающей точкой, логические значения, текстовые данные и ряд других. QGIS поддерживает различные форматы пространственных данных. Среди них наиболее удобным и современным для хранения и работы считается формат Geopackage. По сути это формат базы пространственных данных, внутри которой мы можем складывать различные классы объектов. Для создания базы данных формата Geopackage откройте окно Браузера внутри QGIS. Если его нет, включите его в выпадающем списке при щелчке правой кнопкой мыши по пустой панели. Найдите каталог, в котором вы хотите создать базу данных (лучше всего, чтобы путь к этой базы состоял из символов латинского алфавита, не содержал дефисов, пробелов и спецсимволов). Правой кнопкой мыши щелкните по каталогу, выберете Новые – Geopackage. Откроется окно, которое помимо самой базы данных предложит создать класс объектов внутри неё. В поле Имя таблицы введите имя класса объектов латинскими символами, лучше, чтобы это был английский перевод соответствующего вида картографируемого объекта, а не транслитерация. Окно создания базы данных Geopackage В поле Тип геометрии укажите соответствующую геометрию объектов. Укажите спроецированную систему координат. Если указать геодезическую систему координат, то велика вероятность, что при векторизации объектов возникнут курьёзные ситуации. В разделе New Field можно указать имя, типа и длину атрибутивного поля создаваемого класса объектов. Каждый последующий класс объектов создавайте внутри базы данных. Таким образом вы сформируете единое хранилище для всех картографируемых объектов. 4.3 Векторизация В начало справки ⇡ Созданные классы объектов в базе данных можно добавить в перечень слоев проекта простым перетаскиванием, либо дважды щёлкнув по ним в Браузере. Для редактирования объектов и добавления новых объектов в класс необходимо войти в режим редактирования. Для этого можно щелкнуть правой кнопкой мыши по слою и выбрать пункт Режим редактирования, либо выделить слой и найти на панели инструментов кнопку . Активация режима редактирования откроет некоторые другие кнопки на панелях. Например, для полигонального объекта появится кнопка , с помощью которой можно создать новый полигон в слое. Для других типов геометрии иконка будет немного отличаться. Рисовка контура осуществляется с помощью левой кнопки мыши. Для завершения рисовки объекта нажмите правую кнопку мыши. Для редактирования отдельных вершин нажмите на кнопку . После этого у объекта кружочками выделятся вершины. Полигон в режиме отображения вершин Курсор в таком режиме может вести себя тремя разными способами: При выделении вершины вы можете изменить её положение При выделении ребра вы можете сдвинуть его вместе со смежными вершинами При нажатии на плюсик в центре ребра добавляется новая вершина Нажатие на клавишу DELETE позволяет удалить вершину. При векторизации объектов часто возникает необходимость пристыковать вершины одного объекта к вершинам другого объекта. Для корректной и комфортной пристыковки нужно включить панель Инструменты прилипания (snapping). Кнопка в виде магнита активирует прилипание. Остальные кнопки на данной панели позволяют уточнить параметры прилипания, в том числе расстояние, на котором оно начинает действовать. Если вам необходимо повторить значительную часть существующего контура при создании нового, то удобнее всего воспользоваться трассировкой (Tracing), нажав на кнопку на панели инструментов прилипания. После этого при ведении на небольшом расстоянии от контура новый контур будет автоматически пристыковываться к существующем. Пример работы с инструментом трассировки Дополнительные инструменты оцифровки Соответствующую панель вы так же, как и предыдущую, можете найти в выпадающем списке панелей. Дополнительная панель векторизации На данной панели доступны инструменты для векторизации параллельных и перпендикулярных линий, для перемещения объектов, создания внутренних колец (по сути – дырки в полигоне), разрезания объектов, склеивания объектов и другие. Выбрать объекты, например, для склеивания можно с помощью инструмента выделения . Не забывайте регулярно сохранять изменения в геометрии слоев с помощью кнопки на панели . Также не забывайте изменять изменения в самом проекте (они касаются набора слоев, их оформления, некоторых параметров) с помощью кнопки . 4.4 Работа с атрибутами В начало справки ⇡ Векторизация предназначена для показа геометрической составляющей объектов и явлений на карте. Для показа семантических (смысловых) различий в явлениях используются атрибуты. Преимущество ГИС-пакетов по сравнению с графическими пакетами заключается в том, что мы можем напрямую сопоставить символику слоя и значения атрибутивных полей. Например, если мы показываем качественным фоном какое-либо явление, то каждой явление должно иметь своё значение в атрибутивной таблице. Открыть атрибутивную таблицу слоя можно, нажав правой кнопкой мыши по нему и выбрав пункт Открыть таблицу атрибутов. Выделение строк атрибутивной таблицы на регионы России Для редактирования атрибутов необходимо зайти в режим редактирования с помощью кнопки . Для добавления или удаления атрибутивных столбцов также необходимо зайтив в режим редактирования, после чего появятся соответствующие кнопки и . Обратите внимание, что изменение структуры атрибутивной таблицы в режиме редактирования – это исключительно «фишка» QGIS. Другие известные ГИС-пакеты, например ArcGIS, позволяют это делать только вне режима редактирования. Обратите внимание, что каждая строка в атрибутивной таблице – это, по сути, один объект в классе объектов. Выделять объекты в атрибутивной таблицы можно с помощью нажатия левой кнопки мыши по левому краю строки. Для выбора нескольких строк подряд можно «тянуть» выделение левой кнопкой мыши, либо выделить первый и последний объект с зажатым SHIFT. Для выбора нескольких отдельных строк зажмите CTRL. Выделяемые в атрибутивной таблице объекты будут подсвечиваться жёлтым цветом на карте. Для приближения к выбранному объекту нажмите на кнопку Увеличить карту до выделенных строк . 4.5 Настройка символики В начало справки ⇡ 4.5.1 Использование простой символики Единая символика По умолчанию все слои, открываемые в QGIS имеют единую символику для всех объектов слоя. Для площадных классов объектов это сплошная заливка какого-либо цвета. Получить доступ к настройкам стиля можно через свойства слоя во вкладке Стиль. Обратите внимание, что способ подобной символики указан в самом верху окна и называется Обычный знак. Единый символ в виде сплошной цветовой заливки Мы можем задавать более сложную символику для наших объектов, то есть не только цветовую заливку и обводку. Построение таких символов в QGIS осуществляется в виде иерархии. Например, для добавления штриховки поверх цвета вам нужно нажать кнопку , расположенную справа от окна самого символа в настройках стиля. После этого в символе появится второй слой, также по умолчанию залитый сплошной цветовой заливкой. Тип слоя можно поменять на штриховку, либо на другой вариант символики. В терминологии QGIS штриховкой называется любой паттерн (графическая структура), состоящий из линейных элементов. Штриховка, состоящая из нелинейных (точечных) элементов, называется заливкой маркерами. Типы слоёв символики Обратите внимание, что при выборе типа слоя в виде штриховки его символ распадётся на иерархические элементы – собственно заливка штриховкой и составляющие её линии. Для заливки штриховки доступны свойства наклона (Вращение), интервала (Отступа) и смещения. Символика штриховки Если выделять последовательно в иерархии символа Линия и Простая линия, то вы увидете, что для них доступны разные настройки. В первом случае нам доступны уже стилизованные линии, во втором случае – простая заготовка линии, для которой можно настроить стиль обводки – сплошная линия, пунктирная, штриховая и т.д. Настройки простой линии Для заливки маркерами нужно выбрать соответствующий тип слоя. После этого появится аналогичная штриховке иерархия графических слоёв. Для настройки пользователю доступны параметры самой заливки – расстояния и смещения маркеров, а также параметры маркеров – тип слоя маркеров, размер маркера, цвет и другие. Для добавления пользовательских маркеров используйте тип слоя SVG-маркеры, для которых можно подгрузить собственные графические символы в формате SVG. Настройки маркеров для заливки Уникальные значения В начало справки ⇡ Рассмотрим, каким образом мы ставим в соответствие значения атрибутивных полей и символики. Например, мы хотим присвоить разные цвета для всех регионов. В самой верхней строчке нужно выбрать Уникальные значения, после чего указать в строке Value атрибутивное поле, значения которого мы будем использовать. В строке Градиент можно выбрать заранее заготовленные цветовые шкалы, в том числе и случайные цвета. Для добавления всех значений из атрибутивного поля с присвоенными цветами нажмите на кнопку Классифицировать внизу окна. После применения выбранной классификации в окне слоёв наш слой будет показа соответствующим образом, как в легенде. Классификация по уникальным значениям со случайной цветовой шкалой Вы можете подбирать цвета для категорий вручную, если дважды щёлкните по цветовой шашке. Обратите внимание, что вы можете вместо сплошной цветовой заливки использовать заливку штриховку, менять настройки обводки. Изменение цвета символа Цветовые шкалы В начало справки ⇡ Для создания градуированных цветовых шкал в случае использования в качестве способов изображения изолиний с послойной окраской, картограмм, количественного фона используется стиль градуированного знака. Настройки стиля градуированных знаков В окошке градиент можно выбрать соответствующий градиент. Если вы хотите создать новый градиент – щёлкните правой кнопкой мыши по окошку и выберите Создать новый градиент…, либо Редактировать градиент…. Внизу окна свойств стиля вы можете увидеть настройку классификации Мода, а также количество классов. Подробнее о разных методах классификации и о работе с гистограммой вы узнаете из курсов Основы геоинформатики и Аэрокосмические методы географических исследований. Градуированные значки В начало справки ⇡ Для значков в качестве графической переменной зачастую выступает размер. Зайдите в стиль точечного слоя и укажите тип стиля Градуированный знак. В поле Value укажите атрибутивное поле, по которому будет строится шкала. Нажмите на кнопку со значком по умолчанию – откроется отдельное окно настройки маркера. Вы можете выбрать простой маркер из предложенных, либо выставить тип слоя SVG-маркер – внизу окна появится библиотека встроенных символов, которые можно использовать в качестве маркера. Пользователю доступна настройка цвета и размера маркера. Выбор и настройка SVG-маркера Далее вы можете использовать выбранный маркер в качестве значка. Укажите Метод – Size (построение шкалы по размеру), укажите минимальный и максимальный размер символа. Внизу укажите количество Классов и нажмите на кнопку Классифицировать. Настройка градуированного размеру значка 4.5.2 Использование графических средств диаграмм В начало справки ⇡ Для построения диаграмм нужно перейти в соответствующую вкладку свойств слоя (они расположены отдельно от стиля). В самом верху можно выбрать тип диаграммы – круговая, столбчатая или текстовая. Доступные виды диаграмм Построение круговых диаграмм В начало справки ⇡ Для построения круговых диаграмм необходимо выбрать соответствующий тип вверху окна. В атрибутах задаются те атрибутивные поля, которые будут содержать значения для отдельных секторов диаграммы. Выбор атрибутивных полей для диаграммы Добавление полей осуществляется двойным нажатием на поле. Справа возможна ручная настройка цвета сектора. В разделе Размер задаётся размер диаграммы, то есть некое абсолютное число. Размер может быть Фиксированный, то есть постоянный для всех диаграмм, либо Масштабируемый, то есть зависящий от значений в атрибутивных полях класса. Настройка размера диаграммы Размер может определяться конкретным атрибутивным полем, которое можно выбрать из списка, либо, если вы хотите получать значение, например, на основе суммы входящих в диаграмму значений, нажмите на . После нажатия на кнопку откроется окно Expression dialog, которое ещё называется калькулятором полей. Для составления выражения из атрибутивных полей найдите в центральном окошке категорию Поля и значения и выберите нужные поля двойным щелчком мыши. Названия полей появятся слева, вам остаётся только расставить нужные арифметические операторы между ними. Обратите внимание, что, помимо выражений с существующими полями, можно рассчитывать, например, площадь, обратясь к категории Геометрия и выбрав функцию $area. В окошке Макс. значение можно обозначить максимальное значение показателя, которое будет использоваться в градации, либо использовать расчётное максимальное значение – для этого нажмите на кнопку Найти. В окошке Размер указывается абсолютное значение максимального размера диаграммы. Его можно масштабировать как площадь, либо как диаметр круга (указывается справа). Настройка размещения диаграммы В настройках размещения можно указать способ привязки диаграммы к полигону. Имейте в виду, что центроид не всегда располагается внутри полигона. Настройка легенды диаграммы В настройках легенды можно выбрать вид диаграммы в легенде. Обратите внимание, что в качестве символа диаграммы может быть выбран любой значок – он не имеет отношения к изображению диаграммы на карте. Используя пункт Collapsed legend, мы совмещаем диаграммы разных размером вместе, что удобнее для восприятия их размера. Внизу опция Align symbols позволяет выравнить диаграммы разного размера либо по нижней точке, либо по центру. В окне Заголовка мы можете написать соответствующий заголовок для пункта легенды. Ставя галочку для Manual size classes, пользователю открывается возможность добавлять нужное количество градаций и подбирать для них нужные подписи в колонке Метка. Пример вида с диаграммой показан на рисунке. Аналогичным образом можно построить диаграммы для значкового способа изображения. 4.6 Настройка подписей В начало справки ⇡ Подписи так же, как и символика в геоинформационном программном обеспечении зависят от атрибутов. Для включения подписей в слое зайдите в его свойства и найдите вкладку Подписи. настройка подписей В поле Value указывается атрибутивное поле, из которого подтягиваются сами подписи. Ниже приведены классические настройки для текст – шрифт, размер, стиль, цвет и т.д. Особое внимание при составлении карты следует уделить размещению подписей, чему посвящена отдельная вкладка настроек подписей. Размещение подписей К сожалению, возможностей по оптимальному автоматическому размещению подписей в QGIS не так много. Пользователь может вручную править размещение подписей – для этого необходимо обратиться к специальной панели . Для перемещения подписей нажмите на кнопку . Вместо курсора на карте появится крест, которым нужно щёлкнуть по нужной подписи. После этого откроется диалоговое окно: После нажатия на OK вы сможете перетаскивать подписи одним щелчком мыши. Аналогично после нажатия кнопки подписи можно разворачивать, а после нажатия кнопки – редактировать. Для редактирования открывается отдельное окно, где можно индивидуально настроить параметры каждой подписи. Параметры подписи 4.7 Имитация некоторых сложных графических средств и способов изображения В начало справки ⇡ Некоторые способы изображения трудно реализуемы в ГИС-пакетах. Например, точечный способ есть в ArcGIS, но QGIS он пока отсутствует. Если всё же есть необходимость в использовании данного способа изображения, то можно его сымитировать, хотя с точки зрения базы данных это будет не совсем корректно – вместо полигонального слоя (явление площадной рассеянной локализации) создайте точечный слой, в котором каждая точка будет соответствовать одной точке на карте. Веса точек можно задать с помощью атрибутов. Сложные диаграммы невозможно сделать ни в одном ГИС-пакете. Для их имитации можно подготовить векторное представление диаграммы в формате SVG и добавить в QGIS в качестве SVG-маркера. 4.8 Работа с легендой в компоновке В начало справки ⇡ В макете карты вы можете добавлять столько элементов легенды (кнопка ), сколько отдельных блоков легенды в компоновке вы хотите сделать. Следует помнить, что в QGIS легенда собирается автоматически из содержания слоёв проекта, но пользователь может поменять её свойства. Свойства легенды в макете Если убрать галочку возле опции Auto update, то из перечня слоёв легенды можно убрать лишние слои или отдельные позиции, либо добавить отсутствующие с помощью кнопок ниже. С помощью кнопки можно редактировать текст легенды. 4.9 Редактирование карты в графическом пакете В начало справки ⇡ Для редактирования карты в графическом пакете можно использовать открытое ПО Inkscape. Экспортируйте макет вашей карты из QGIS в формате SVG и откройте файл в Inkscape. Каждый элемент карты теперь представлен как графика, что позволяет вручную их перемещать, редактировать с помощью инструмента . Редактировать вершины объектов можно с помощью инструмента . Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "],
["map-generalize.html", "Справка 5 Картографическая генерализация 5.1 Исходные данные 5.2 Приёмы генерализации 5.3 Подготовка данных 5.4 Ручные приёмы работы с геометрией 5.5 Автоматизированные приёмы работы с геометрией 5.6 Ценз отбора через SQL-запрос", " Справка 5 Картографическая генерализация 5.1 Исходные данные Бланк задания База данных земельных ресурсов России в формате Geopackage (полная) Базы данных по тематикам Данные по земельным ресурсам России на официальном сайте 5.2 Приёмы генерализации В начало справки ⇡ Все приёмы генерализации по К.А. Салищеву [Салищев, 1982] применительно к геоинформационному ПО можно разделить с точки зрения работы пользователя. Часть приёмов подразумевает, что пользователь при генерализации редактирует геометрию (правит векторную составляющу, работает с узлами), другая часть подразумевает работу с атрибутами объектов, либо вообще – создание нового абсолютно нового класса объектов, зачастую – другого типа геометрии. Приём генерализации Работа с геометрией Работа с атрибутами Изменение типа геометрии Упрощение + - - Объединение + - - Сдвиг + - - Утрирование + - - Отбор - + - Обобщение качественных характеристик - + - Обобщение количественных характеристик - + - Переход от простых понятий к сложным - - + 5.3 Подготовка данных В начало справки ⇡ Работая с готовым набором данных зачастую возникает необходимость в обрезке территории по некому заданному контуру. В ГИС-пакете QGIS для этого можно воспользоваться специальным инструментом. Например, для обрезки векторного слоя по границе региона выделите с помощью инструмента нужные объекты, после чего они подсветятся жёлтым цветом. В главном меню программы найдите Вектор – Геообработка – Обрезать…. Откроется окно, в котором указывается исходный слой и слой, по которому мы хотим обрезать исходный слой. При необходимости ставим галочку, если работа идёт с выделенными объектами. По умолчанию новый слой сохранится как временный, но можно и указать путь для сохранения. Окно инструмента обрезки Для сохранения нового слоя в нужную нам базу данных нужно указать путь к этой базе. После этого во всплывающем окне укажите имя выходного слоя. 5.4 Ручные приёмы работы с геометрией В начало справки ⇡ При упрощении, сдвиге и утрировании объектов на карте приходится редактировать геометрию существующих объектов. Для перехода в режим узлов включите редактирование, а затем нажмите на кнопку . После этого вы сможете левой кнопкой мыши двигать вершины объектов, двигать рёбра и добавлять новые вершины нажатием на плюс. Для удаления вершины нажмите Delete. Во время работы с уже готовыми слоями векторных данных зачастую приходится редактировать границы двух смежных объектов. Это удобно делать одновременно для двух объектов сразу, а не по отдельности. Такой вид редактирования называется топологическим, и вы его можете найти на панели инструментов прилипания . После этого одним нажатием левой кнопки мыши вы можете выбрать ребро или вершину, перетащить их и вторым нажатием зафиксировать новое положение, либо удалить лишние вершины. Топологическое редактирование Для объединения нескольких векторных объектов в один нужно выбрать объекты и нажать на кнопку , которая расположена на панели дополнительных инструментов оцифровки. Перед вами откроется окно, в котором будут показаны атрибуты склеиваемых объектов и атрибут нового объекта в строке Результат. Если результирующий атрибут вас не устраивает, вы можете вписать нужное значение в соответствующее поле, либо выделить строку с нужным набором атрибутов и нажать на кнопку Использовать атрибуты выделенного объекта. Окно объединения атрибутов объектов 5.5 Автоматизированные приёмы работы с геометрией В начало справки ⇡ В QGIS доступны некоторые инструменты автоматизированного упрощения геометрии. Выберите в главном меню Вектор – Обработка геометрии – Simplify…. Откроется инструмент, упрощающий геометрию объектов. Для линейных объектов рекомендуется выбирать алгоритм Дугласа-Пейкера. Окно инструмента упрощения Данный алгоритм убирает вершины согласно заданному порогу, который устанавливается пользователем на основе масштаба и детализации исходных данных. К полигональным слоям этот инструмент тоже применим, но его работа не всегда корректна – на стыке трёх или более объектов возникают топологические ошибки (дырки и наложения), поэтому его применять следует осторожно не для сплошного покрытия полигональных объектов. В QGIS есть инструмент для сглаживания векторных объектов. Для его использования нужно открыть окно Инструментов анализа и в нём найти инструмент Векторная геометрия – Сглаживание. Окно инструмента сглаживания Обратите внимание, что оба инструмента не изменяют текущий слой, а создают новый. Упрощение и сглаживание объектов доступно в индивидуальном порядке в текущем слое на панели инструментов дополнительной оцифровки. Выбрав редактируемый слой в режиме редактирования, нажмите на кнопку , после чего кликните по объекту, который вы хотите упростить. Откроется маленькое окошко, в котором можно выбрать метод сглаживания, либо упрощения. Окно выбора метода упрощения и сглаживания 5.6 Ценз отбора через SQL-запрос В начало справки ⇡ SQL – Structered query language (структурированный язык запросов) – очень надёжный и удобный способ делать выборки объектов в базе данных ГИС по значениям их атрибутов. Подробнее об SQL-запросах вы узнаете из курса Основы геоинформатики, а сейчас мы ограничимся простым примером, как можно выбрать, например, все реки, длина которых менее, чем заданный ценз отбора. Для выборки объектов нужно открыть атрибутивную таблицу соответствующего слоя. Наверху таблицы найдите кнопку . Откроется окно, состоящие из трёх вложенных окон. В левом окне пишется собственно запрос, в центральном окне можно выбрать названия атрибутов, значения атрибутов, функции и прочее, в правом окне даётся текстовая справка. Выражение для запроса всех рек с длиной менее 100 км В разделе *Поля и значения выберите название поля, по которому осуществляется запрос, дважды щёлкните, чтобы оно появилось в левом окошке. В разделе Операторы выберите соответствующий оператор. Справа от оператора укажите соответствующее значение ценза в единицах измерения слоя. Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "],
["map-use.html", "Справка 6 Картографический метод исследования 6.1 Исходные данные 6.2 Полезные ссылки с пространственными данными 6.3 Приёмы использования карт 6.4 Построение регулярных сеток 6.5 Расчёт значений на сетку территориального деления 6.6 Построение геополей", " Справка 6 Картографический метод исследования 6.1 Исходные данные Бланк задания 6.2 Полезные ссылки с пространственными данными Данные Natural Earth Данные OpenStreetMap Цифровая общегеографическая основа ВСЕГЕИ Многоуровневое административное деление на мир и на отдельные страны 6.3 Приёмы использования карт В начало справки ⇡ Приёмы Описания по картам `Графические приёмы` | Графоаналитические приёмы `Методы математического анализа` | Методы математической статистики `Методы сетевого анализа` | 6.4 Построение регулярных сеток В начало справки ⇡ Для построения регулярных сеток используйте инструмент Вектор – Выборка – Create Grid…. В строке параметра Grid type можно выбрать тип регулярной сетки: точки, линии, прямоугольник, ромб и гексагон. В строках Horizontal spacing и Vertical spacing указываются размеры ячеек. В строках Horizontal overlay и Vertical overlay задаётся перекрытие между ячейками. Лучше всего в качестве системы координат указывать проекцию, а результат сохранять либо в шейпфайл, либо в существующую базу данных Geopackage. Окно создания регулярной сетки 6.5 Расчёт значений на сетку территориального деления В начало справки ⇡ Мы можем рассчитывать количество точек для каждой ячейки в пределах сетки территориального деления. Для этого используется инструмент Вектор – Анализ – Подсчитать точки в полигоне…. В этом инструменте указывается слой с соответствующими полигонами и слой с точками, плотность которых мы хотим получить. Обратите внимание, что под входными слоями можно выставить опцию для учёта только выбранных объектов. Это оправдано в случае, если вы работаете только с частью данных, а обработка занимает продолжительное время. В качестве поля взвешевания можно указывать численное атрибутивное поле, например, численность населения. Инструмент расчёта количества точек в ячейках Для линейных объектов можно использовать инструмент Вектор – Анализ – Сумма расстояний…. Он работает аналогично предыдущему инструменту. Инструмент расчёта длины линий в ячейках Для приведения рассчитанных значений ячеек в относительный вид необходимо воспользоваться калькулятором поля. Для ячеек можно рассчитать площадь, зайдя в таблицу атрибутов и нажав на кнопку . Для создания нового поля установите соответствующую галочку сверху, а для обновления поля укажите его сверху справа. Для нового поля необходимо указать имя и тип данных. Для расчёта площади можно воспользоваться стандартной функцией $area. Расчет площади через калькулятор поля Обратие внимание, что функция $area считает площадь на эллипсоиде, а не в проекции. Для расчёта относительных значений вы можете написать соответствующее выражение из отдельных атрибутивных полей, выбрав их названия в разделе Поля и значения. 6.6 Построение геополей В начало справки ⇡ При построении геополей с помощью геоинформационных инструментов мы переходим к растровой модели данных. Растр – регулярно-ячеистая модель данных, где каждой ячейке (пикселю) соответствует какое-либо значение. Один из инструментов континуализации – построение поверхности ядерной плотности (kernel density), которая также известна за рубежом как тепловая карта (heatmap). Карпачевский А.М. Картография: практикум в QGIS. М.: Географический факультет МГУ, 2020. "]
]
